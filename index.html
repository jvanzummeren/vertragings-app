<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  	<meta name="apple-mobile-web-app-capable" content="yes" />  
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 

	<title>Vertragingsapp</title>
	<link href="css/boilerplate.css?v=2" rel="stylesheet" type="text/css" />
	<link href="css/main.css?v=2" rel="stylesheet" type="text/css" />
	<link href="css/normalize.css?v=2" rel="stylesheet" type="text/css" />
  	<link href="css/idangerous.swiper.css?v=2" rel="stylesheet" type="text/css" />

</head>
<body>
	<header class="navigation-bar">
		<span class="menu-button add">
			<i class="menusprite menusprite--add"></i>
		</span>
		<h1>Trajecten</h1>	
	</header>

	<!--section class="editsettings">
		<button class="closesettings"></button>
		<img src="img/sprites/instellingenplaceholder.png" alt="" class="closesettings">
	</section-->

	<div class="swiper-container">
		<div class="swiper-wrapper">

			<!-- Trajectpagina -->
			<div class="swiper-slide">

				<div class="traject-container">
					<header class="traject-description">
						<h1 class="traject-name">Werk</h1>
						<h2 class="from">Station Koog aan de Zaan</h2>
						<h2 class="to">Metro Weesperplein</h2>
					</header>
					<ul>
						<li class="traject">
							<div class="traject-short">
								<span class="time-start">12:00</span>
								<i class="iconsprite iconsprite--arrow"></i>
								<span class="time-end">12:50</span>
								<i class="iconsprite iconsprite--collapse">Collapse icon</i>
							</div>
							<div class="transport">
								<div class="box-left">
									<span class="time-added">+3min</span>
									<i class="iconsprite-pt iconsprite--bus ontime">*I*</i>
									<span class="time-arrival">12:50</span>
								</div>
								<div class="box-right">
									<span class="traject-location">Bushalte Dorpsstraat</span>
									<span class="additional-information">Halte 23</span>
								</div>
							</div>
							<div class="transport">
								<div class="box-left">
									<span class="time-added">+3min</span>
									<i class="iconsprite-pt iconsprite--bus ontime">*I*</i>
									<span class="time-arrival">12:50</span>
								</div>
								<div class="box-right">
									<span class="traject-location">Station Zaandam</span>
									<span class="additional-information">Spoor 7a</span>
								</div>
							</div>
							<div class="transport">
								<div class="box-left">
									<span class="time-added">+3min</span>
									<i class="iconsprite-pt iconsprite--bus ontime">*I*</i>
									<span class="time-arrival">12:50</span>
								</div>
								<div class="box-right">
									<span class="traject-location">Metro Weesperplein</span>
									<span class="additional-information">metrohalte</span>
								</div>
							</div>
						</li>
					</ul>
				</div>

			</div>

		</div>
	</div>

	<div class="pagination"></div>

	<!--
	<i class="iconsprite-pt iconsprite--bus ontime"></i>
	<i class="iconsprite-pt iconsprite--bus late"></i>
	<i class="iconsprite-pt iconsprite--subway ontime"></i>
	<i class="iconsprite-pt iconsprite--subway late"></i>
	<i class="iconsprite-pt iconsprite--train ontime"></i>
	<i class="iconsprite-pt iconsprite--train late"></i>
	-->
	
	<script src="js/jquery-1.10.1.min.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script src="js/jquery.storageapi.js"></script>

	<script src="js/jquery-ui.min.js"></script>
	<script src="js/idangerous.swiper-2.1.min.js"></script>
	<script>
		var randomTrajecten = ["School", "Werk", "Vriendin", "Bibliotheek", "Universiteit"];
		var mySwiper;
		var storage = $.localStorage;
		var trajecten = storage.get('trajecten');

		if(!trajecten) trajecten = [];



		$(function(){
		    mySwiper = new Swiper('.swiper-container', {
		      loop:false,
		      pagination: '.pagination',
		      paginationClickable: true
		    });

		    $(trajecten).each(function(index, value){
		    	console.log(this);
		    	console.log(value);
		    	var trajectNaam = this.trajectNaam;
				var van = this.van;
				var naar = this.naar;
				addTrajectSlide(trajectNaam, van, naar);
		    })
		});

		$(".add").click(function(){
			var trajectNaam = randomTrajecten[Math.floor(Math.random() * randomTrajecten.length)];
			var van = "Haarlem";
			var naar = "Amsterdam";
			saveTrajectSlide(trajectNaam, van, naar);
			addTrajectSlide(trajectNaam, van, naar);
			mySwiper.swipeTo($('.swiper-slide').size()-1, 500, function(){});
		});

		function addTrajectSlide(trajectNaam, van, naar){	
			var newSlide = $('.swiper-slide:eq(0)').clone();
	    	newSlide.find('.traject-name').html(trajectNaam);
	    	newSlide.insertAfter('.swiper-slide:last');
			mySwiper.reInit();
	    	
		}

		function saveTrajectSlide(trajectNaam, van, naar){
			trajecten.push({
				trajectNaam : trajectNaam,
				van : van,
				naar: naar
			});

			storage.set('trajecten', trajecten);
		}

	</script>
	<script src="js/show-traject-details.js"></script>

</body>
</html>